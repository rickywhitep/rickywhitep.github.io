[Bloque A Scilab] Cargar matriz desde archivo .txt;M = fscanfMat('libelulasyranas.txt') [cite: 21]
[Bloque A Maxima] Cargar matriz desde archivo .txt;load(numericalio)$ M : read_matrix("libelulasyranas.txt")$ [cite: 22]
[Bloque A Scilab] Extraer columnas de matriz de datos;L = M(:, 1) // Primera columna (Libélulas) <br> R = M(:, 2) // Segunda columna (Ranas) [cite: 21]
[Bloque A Scilab] Crear vector de tiempo (3 años en semanas);N = size(L, '*') // Obtiene número total de datos <br> t = 1 : N // Crea vector 1, 2, ..., 156 [cite: 21]
[Bloque A Scilab] Representar dos series en la misma gráfica;plot(t, L, 'r', t, R, 'b') <br> legend(['Libélulas' (pyc) 'Ranas']) <br> xtitle('Poblaciones', 'Semanas', 'Individuos') [cite: 22]
[Bloque A Maxima] Convertir matriz leída a listas (L y R);L : makelist(M[i][1], i, 1, length(M))$ <br> R : makelist(M[i][2], i, 1, length(M))$ [cite: 22]
[Bloque A Maxima] Plotear listas discretas;plot2d([[discrete, L], [discrete, R]], [style, lines, lines], [legend, "Libélulas", "Ranas"], [xlabel, "Semanas"])$ [cite: 22]
[Bloque B Scilab] Lógica de índices para Correlación c(d);Para un retardo d: <br> Rango L: 1 hasta N-d -> L(1 : N-d) <br> Rango R: d+1 hasta N -> R(d+1 : N) [cite: 24, 26]
[Bloque B Scilab] Fórmula de media local en bucle;// Dentro del bucle d <br> mL = mean(L(1 : N-d)) <br> mR = mean(R(d+1 : N)) [cite: 26]
[Bloque B Scilab] Cálculo numerador Correlación (Covarianza);term1 = L(1:N-d) - mL <br> term2 = R(d+1:N) - mR <br> numerador = sum(term1 .* term2) [cite: 24]
[Bloque B Scilab] Estructura Bucle Principal Correlación;N = length(L) <br> for d = 1:15 <br>   // Cálculos de numerador y denominador aquí <br>   c(d) = numerador / denominador <br> end [cite: 29]
[Bloque B Scilab] Encontrar máximo correlación y posición;[max_val, d_optimo] = max(c) <br> disp('Mejor retardo d:', d_optimo) [cite: 30]
[Bloque C Scilab] Inicialización para Filtrado (Importante);Sf = S // Se copia la serie original primero para conservar los bordes donde el filtro no aplica. [cite: 34]
[Bloque C Scilab] Lógica del Filtro de Media Móvil;K = 2 // Orden 2K <br> for i = 1:N <br>   if (i > K+1) & (i < N-K) then <br>     Sf(i) = mean(S(i-K : i+K)) <br>   end <br> end [cite: 32, 33]
[Bloque C Scilab] Plot comparativo (Original vs Filtrado);plot(t, S, 'k.', t, Sf, 'r-', 'Thickness', 2) // k. = puntos negros (ruido), r- = línea roja (tendencia) [cite: 37]
[Bloque D Maxima] Definir función de ajuste Libélulas;fL(a, b, t) := 300 + a * sin(2*%pi*t/52) + b * t$ [cite: 39]
[Bloque D Maxima] Definir función de ajuste Ranas (con retardo d);fR(a, b, t) := 200 + a * sin(2*%pi*(t - d_optimo)/52) + b * t$ // d_optimo debe ser valor numérico [cite: 39, 41]
[Bloque D Maxima] Algoritmo de Fuerza Bruta (Estructura);error_min : 100000000$ <br> mejor_a : 0$ <br> mejor_b : 0$ <br> for a : 100 step 1 thru 200 do ( <br>   for b : -0.5 step 0.05 thru 0.5 do ( <br>      // Calcular error y actualizar si es menor <br>   ) <br> )$ [cite: 46]
[Bloque D Maxima] Cálculo Error Cuadrático (Sumatorio);EC : lsum(sqrt((fL(a, b, i) - L[i])^2), i, 1, length(L))$ [cite: 44]
[Bloque D Maxima] Actualización de parámetros óptimos;if (EC < error_min) then ( <br>   error_min : EC, <br>   mejor_a : a, <br>   mejor_b : b <br> )$ [cite: 43]
[Bloque E Maxima] Definir Tendencia Lineal (No periódica);TL(t) := 300 + mejor_bL * t$ <br> TR(t) := 200 + mejor_bR * t$ [cite: 49]
[Bloque E Maxima] Calcular Extinción y conversión a años;sol : solve(TL(t) = 0, t)$ <br> semanas_extincion : rhs(sol[1])$ <br> anios : float(semanas_extincion / 52)$ [cite: 50]
[Gestión] Normativa de entrega;Nombre archivo: T2_ApellidosNombre.zip <br> Contenido: PDF explicativo + códigos (.sce y .wxm/.mac). [cite: 12, 13]